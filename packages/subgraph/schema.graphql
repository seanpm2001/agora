type Block @entity {
  id: ID!
  timestamp: BigInt!
}

type Metrics @entity {
  id: ID!
  totalSupply: BigInt!
  delegatedSupply: BigInt!
  quorumNumerator: BigInt!
}

type Account @entity {
  id: ID!

  amountOwned: BigInt!
  delegatingTo: Account

  tokensRepresented: BigInt!
  tokenHoldersRepresented: [Account!]! @derivedFrom(field: "delegatingTo")

  proposed: [Proposal!]! @derivedFrom(field: "proposer")
  votes: [Vote!]! @derivedFrom(field: "voter")
}

enum ProposalStatus {
  CREATED
  CANCELLED
  EXECUTED
  QUEUED
}

type Proposal @entity {
  id: ID!
  proposer: Account!
  targets: [String!]!
  values: [BigInt!]!
  signatures: [String!]!
  calldatas: [Bytes!]!
  startBlock: BigInt!
  endBlock: BigInt!
  description: String!

  status: ProposalStatus!
  activatedAt: BigInt

  votes: [Vote!]! @derivedFrom(field: "proposal")
}

type Vote @entity {
  id: ID!
  block: Block!
  voter: Account!
  proposal: Proposal!
  support: Int!
  weight: BigInt!
  reason: String!
}
